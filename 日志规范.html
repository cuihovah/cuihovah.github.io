<!DOCTYPE html>
<html>

<head>
  <title></title>
  <meta charset="utf-8">
  <style>
    pre {
      color: #333;
      background: none;
      font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
      text-align: left;
      white-space: pre;
      word-spacing: normal;
      word-break: normal;
      word-wrap: normal;
      line-height: 1.4;
      -moz-tab-size: 8;
      -o-tab-size: 8;
      tab-size: 8;
      -webkit-hyphens: none;
      -moz-hyphens: none;
      -ms-hyphens: none;
      hyphens: none;
      display: block;
      font-family: monospace;
      white-space: pre;
      margin: 1em 0px;
      padding: .8em;
      overflow: auto;
      border: 1px solid #ddd;
      border-radius: 3px;
      background: #f5f5f5;
    }

    body {
      padding: 2em calc(50% - 457px);
    }

    img {
      max-width: 100%;
    }

    a {
      color: #071ac8;
    }

    header a {
      color: black;
    }

    blockquote p {
      background-color: #f2f2f2;
      border-left: 5px solid #d5d5d5;
      padding: 8px;
      font-size: 13px;
    }

    header {
      text-align: center;
      padding-bottom: 20px;
      font-size: 30px;
      font-weight: 900;
    }

    footer {
      border-top: 1px solid #555;
      padding-top: 10px;
      color: #333;
    }
  </style>
</head>

<body>
  <header><u><a href="/index.html">Cuihovah's Personal Site</a></u></header>
  <div>
    This site is a summary of the problems I encountered at 
    work and some interesting little paragraphs. If the content 
    of this site infringes your copyright, please notify me 
    in time, I will remove the infringing content in the first 
    time. If you are a Tencent QQ user, welcome to join QQ group 253542996
  </div>
  <h1 id="">日志规范</h1>
<h2 id="1">1.记录日志意义:</h2>
<p>日志记录的好坏直接关系到系统出现问题时定位的速度，同时可以通过对日志的观察和分析，提前发现系统可能的风险，避免线上事故的发生。</p>
<h2 id="2">2.日志级别：</h2>
<p>fatal、error、warn、info、debug、trace</p>
<p><strong>error</strong></p>
<p>问题已经影响到软件的正常运行，并且软件不能自行恢复到正常的运行状态，必须马上有人进行处理。此时需要输出该级别的错误日志。比如：数据库不可用，关键业务流程中断等等.</p>
<p><strong>warn</strong></p>
<p>与业务处理相关的失败，此次失败不影响下次业务的执行，通常的结果为外部的输入不能获得期望的结果。比如：接受到的参数错误，缺失.</p>
<p><strong>info</strong></p>
<p>系统运行期间的系统运行状态变化，或关键业务处理记录.</p>
<h2 id="3">3.日志内容规范：</h2>
<pre>
涉及谁 Who
发生了什么 What
发生在哪里 Where
发生在何时 When
为什么发生 Why
如何发生的 How
总结成一句话：谁在何时何地发生了什么事，为什么发生，如何发生的
</pre>
<pre>
比如登陆错误日志  
涉及谁 ：tom (调用者，第三方接口等)  
发生了什么： 身份认证失败，（异常栈信息等 new Error(’身份认证失败’)）  
发生在哪里： 数据库db,（文件名，函数名）  
发生在何时：2018-11-20 12:01:00 (new Date())  
为什么发生：密码错误，（参数缺失或错误）  
如何发生的：用户输入错误密码，（用户输入参数）  
</pre>
<p><strong>记录日志时请思考：看到这条日志你能做什么？能不能给问题排查带来好处？</strong></p>
<h2 id="4">4.注意：</h2>
<ol>
<li>一个事件输出日志，有另外一个事件也会输出日志，日志就会交叉输出，解决：应是将完整的日志信息放到一行打印  </li>
<li>只记录有必要的日志，大量地输出无效日志，不利于系统性能提升，也不利于快速定位错误点。  </li>
<li>try-catch：只对可能发生错误的代码使用</li>
<li>异常信息应该包括两类信息：案发现场信息和异常堆栈信息，如果不处理，那么往上抛。  </li>
<li>可以使用 <strong>warn</strong> 日志级别来记录用户输入参数错误的情况，避免用户投诉时，无所适从。注意日志输出的级别， <strong>error</strong> 级别只记录系统逻辑出错、异常、或者重要的错误信息。如非必要，请不要在此场景打出 <strong>error</strong> 级别.</li>
</ol>
  <footer>
      The head has already been said, if I accidentally 
      quoted your things, remember to remind me, but this 
      site should not be sent this way. Almost everything 
      is written by myself, and I have reported on the tools 
      for generating blogs and the bed service. Of course, if 
      you want to reprint the contents of this website, please 
      help me write the source. Copyright (c) 2016-2018 Cuihovah
  </footer>
</body>
</html>
